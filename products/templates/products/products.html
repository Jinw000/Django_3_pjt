{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/products.css' %}">
{% endblock css %}

{% block content %}
<h1>메인화면</h1>
{% if request.user.is_authenticated %}
        <h2>Hello, {{ request.user.username }}</h2>
<form action="{% url 'users:profile' request.user.username %}" method="POST">
    {% csrf_token %}
    <input type="submit" value="내정보">
</form>
<form action="{% url 'accounts:logout' %}" method="POST">
    {% csrf_token %}
    <input type="submit" value="로그아웃">
</form>
<form action="{% url "accounts:update" %}" method="">
    <input type="submit" value="회원정보수정">
</form>

</form>
<form action="{% url "users:users" %}" method="">
    <input type="submit" value="유저목록">
</form>

{% endif %}

{% if request.user.is_authenticated %}
    <a class="new-content" href="{% url 'products:create' %}">
        <button>새로운 글작성</button>
    </a>

{% else %}

    <a href="{% url 'accounts:login' %}">로그인하고 글 작성하기</a>

{% endif %}

<form method="GET" action="{% url 'products:products' %}">
    <div>
    <select name="sort" id="sort">
        <option value="deault" id="default">------</option>
        <option value="recently" id="recently">최신순</option>
        <option value="mark" id="mark">인기순</option>
    </select>
    <button class="sort" type="submit" value="">정렬</button>
    </div>


{% for product in products %}
<a href="{% url 'products:product_detail' product.pk %}">
    <p>[{{ product.pk }}]{{ product.title }}  작성자:{{ product.seller.username }}</p>
    <br>
    {% if product.image %}
    <img src="{{ product.image.url }}">
    {% endif %}
</a>
<p>찜수 : {{ product.mark_user.count }}</p>
<p>조회수: {{ product.hit }}</p>

{% endfor %}


{% endblock content %}